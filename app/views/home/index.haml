.row
  .col-lg-9
    .panel.panel-default
      .panel-heading
        %i.fa.fa-bar-chart-o.fa-fw
        Routed Messages
        .pull-right
          .btn-group
            %button.btn.btn-default.btn-xs.dropdown-toggle{"data-toggle" => "dropdown", :type => "button"}
              Filters
              %span.caret
            %ul.dropdown-menu.pull-right{:role => "menu"}
              %li
                %a{:href => "#"} All Server
              -@domino_servers.each do |s|
                %li
                  %a{:href => "#"}=s[1]
              %li.divider
              %li
                %a{:href => "#"} Separated link
      .panel-body
        .flot-chart
          #home_chart1.flot-chart-content
    .panel.panel-default
      .panel-heading
        %i.fa.fa-bar-chart-o.fa-fw
        History
      .panel-body
        .hystory-chart
          #home_chart6.flot-chart-content
  .col-lg-3
    .panel.panel-default
      .panel-heading
        %i.fa.fa-lock.fa-fw
        Locks
      .panel-body
        %ul.list-unstyled
          -@locks.each do |l|
            %li.list-unstyled
              %i.fa.fa-lock.fa-fw
              ="#{l[1]} #{l[0]} "
              %span.pull-right.text-muted.small
          =link_to url_for(controller: :home, action: :locks), class: "alert-link" do
            All Locks
    .panel.panel-default
      .panel-heading
        %i.fa.fa-lock-o.fa-fw
        Login Error
      .panel-body
        -@login_errors.each do |l|
          %li.list-unstyled
            %i.fa.fa-lock.fa-fw
            ="#{l.label}"
            %span.pull-right.text-muted.small
.row
  .col-lg-12


.row
  .col-lg-3
    .panel.panel-default
      .panel-heading
        %i.fa.fa-bar-chart-o.fa-fw
        Routed IN  Message
        .pull-right
          .btn-group
            %button.btn.btn-default.btn-xs.dropdown-toggle{"data-toggle" => "dropdown", :type => "button"}
              Actions
              %span.caret
            %ul.dropdown-menu.pull-right{:role => "menu"}
              %li
                %a{:href => "#"} Action
              %li
                %a{:href => "#"} Another action
              %li
                %a{:href => "#"} Something else here
              %li.divider
              %li
                %a{:href => "#"} Separated link
      / /.panel-heading
      .panel-body
        .pie-chart
          #home_chart2.flot-chart-content
  .col-lg-3
    .panel.panel-default
      .panel-heading
        %i.fa.fa-bar-chart-o.fa-fw
        Routed OUT  Message
        .pull-right
          .btn-group
            %button.btn.btn-default.btn-xs.dropdown-toggle{"data-toggle" => "dropdown", :type => "button"}
              Actions
              %span.caret
            %ul.dropdown-menu.pull-right{:role => "menu"}
              %li
                %a{:href => "#"} Action
              %li
                %a{:href => "#"} Another action
              %li
                %a{:href => "#"} Something else here
              %li.divider
              %li
                %a{:href => "#"} Separated link
      / /.panel-heading
      .panel-body
        .pie-chart
          #home_chart3.flot-chart-content
  .col-lg-3
    .panel.panel-default
      .panel-heading
        %i.fa.fa-bar-chart-o.fa-fw
        Domains OUT
        .pull-right
          .btn-group
            %button.btn.btn-default.btn-xs.dropdown-toggle{"data-toggle" => "dropdown", :type => "button"}
              Actions
              %span.caret
            %ul.dropdown-menu.pull-right{:role => "menu"}
              %li
                %a{:href => "#"} Action
              %li
                %a{:href => "#"} Another action
              %li
                %a{:href => "#"} Something else here
              %li.divider
              %li
                %a{:href => "#"} Separated link
      / /.panel-heading
      .panel-body
        .pie-chart
          #home_chart4.flot-chart-content
  .col-lg-3
    .panel.panel-default
      .panel-heading
        %i.fa.fa-bar-chart-o.fa-fw
        Domains IN
        .pull-right
          .btn-group
            %button.btn.btn-default.btn-xs.dropdown-toggle{"data-toggle" => "dropdown", :type => "button"}
              Actions
              %span.caret
            %ul.dropdown-menu.pull-right{:role => "menu"}
              %li
                %a{:href => "#"} Action
              %li
                %a{:href => "#"} Another action
              %li
                %a{:href => "#"} Something else here
              %li.divider
              %li
                %a{:href => "#"} Separated link
      / /.panel-heading
      .panel-body
        .pie-chart
          #home_chart5.flot-chart-content
.row
  .col-lg-4
    .table-responsive
      %table.table.table-bordered.table-hover.table-striped
        %thead
          %tr
            %th #
            %th Date
            %th Time
            %th Amount
        %tbody
          %tr
            %td 3326
            %td 10/21/2013
            %td 3:29 PM
            %td $321.33

#chart1_data{data: @chart1_data}
#chart2_data{data: @chart2_data}
#chart3_data{data: @chart3_data}
#chart4_data{data: @chart4_data}
#chart5_data{data: @chart5_data}
#chart6_data{data: @chart6_data}

:javascript

  var pie_options={series: {
                              pie: {
                                  show: true,
                                  radius: 1,
                                  label: {
                                      show: false,
                                      //radius: 3/4,
                                      background: {opacity: 0.5,color: '#000'}
                                  } , threshold: 0.1
                              }
                          },
                          legend: {show: false},
                          grid: {hoverable: true, clickable: true}  ,
                           tooltip: true,
                          tooltipOpts:{ content: alert_data}
                          };

  $.plot($("#home_chart1"),
     $('#chart1_data').data('chart-data'),
      {
        series: {lines: { show: true },points: { show: true }},
        xaxis: {mode: "time"},
        grid: {hoverable: true, clickable: true},
        tooltip: true,
        tooltipOpts:{ content: "%s | Messages: %x | Time: %y"}
    }

  );

  $.plot($("#home_chart6"),
     $('#chart6_data').data('chart-data'),
      {
        series: {lines: { show: true },points: { show: false }},
        xaxis: {mode: "time"}
    }

  );

  $.plot('#home_chart2',  $('#chart2_data').data('chart-data'),pie_options);
  $.plot('#home_chart3',  $('#chart3_data').data('chart-data'),pie_options);
  $.plot('#home_chart4',  $('#chart4_data').data('chart-data'),pie_options);
  $.plot('#home_chart5',  $('#chart5_data').data('chart-data'),pie_options);


  //$('#home_chart1').bind("plotclick",  alert_data);
  //$('#home_chart2').bind("plotclick",  alert_data);
  //$('#home_chart2').bind("plothover",  alert_data);
  //$('#home_chart3').bind("plotclick",  alert_data);
  //$('#home_chart4').bind("plotclick",  alert_data);
  //$('#home_chart5').bind("plotclick",  alert_data);

  setTimeout(function(){
     window.location.reload(1);
  }, 15000);

  function alert_data(label, xval, yval, flotItem) {

            console.log(xval);
            console.log(yval);
            console.log(flotItem);
            return label + ": " + yval + " ("+ flotItem.datapoint[0].toPrecision(4) +"%)";
        } ;
